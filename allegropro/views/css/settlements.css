/* AllegroPro - Admin Settlements UI (PrestaShop 8.2.x)
   Keep this file standalone to avoid Smarty parsing issues with { } in templates.
*/

.alpro-page{max-width:1600px;margin:0 auto;}

/* Header */
.alpro-head{display:flex;align-items:flex-start;justify-content:space-between;gap:12px;flex-wrap:wrap;}
.alpro-head .title{display:flex;align-items:center;gap:10px;min-width:260px;}
.alpro-head .title .material-icons{opacity:.9;}
.alpro-head .meta{font-size:12px;color:#6c757d;display:flex;align-items:center;gap:8px;flex-wrap:wrap;}

/* Filters */
.alpro-filters{display:grid;grid-template-columns:1fr auto;gap:14px;align-items:end;}
.alpro-filters .filters-left{display:flex;flex-wrap:wrap;gap:12px;align-items:end;}
.alpro-filters .filters-right{display:flex;gap:10px;align-items:end;justify-content:flex-end;}
.alpro-filter-row{display:flex;flex-wrap:wrap;gap:12px;align-items:end;}
.alpro-filters .form-group{margin-bottom:0;}
.alpro-filters label{font-size:12px;color:#495057;}


.alpro-accounts{min-width:260px;}
.alpro-accounts[multiple]{height:38px;}

/* Account select (Select2 if available) */
.select2-container{min-width:260px;}
.select2-container--default .select2-selection--multiple{min-height:38px;border-radius:10px;border:1px solid #ced4da;}
.select2-container--default .select2-selection--multiple .select2-selection__rendered{padding:3px 8px;}
.select2-container--default .select2-selection--multiple .select2-selection__choice{margin-top:4px;}
.alpro-filters,.alpro-filter-row{overflow:visible;}
.alpro-select-all{display:inline-block;font-size:12px;color:#0b6aa2;margin-top:4px;text-decoration:none;}
.alpro-select-all:hover{text-decoration:underline;}

.alpro-muted{font-size:12px;color:#8a93a0;margin-top:2px;}


/* Dashboard layout: cards (left) + structure chart (right) */
.alpro-dashboard{display:grid;grid-template-columns:minmax(520px,1fr) minmax(420px,600px);gap:16px;align-items:start;}
.alpro-dashboard__left{min-width:0;}
.alpro-dashboard__right{min-width:0;}
@media (max-width: 1200px){
  .alpro-dashboard{grid-template-columns:1fr;}
}


/* KPI cards */
.alpro-kpi-grid{display:grid;grid-template-columns:repeat(12,1fr);gap:12px;}
.alpro-kpi-grid--compact{grid-template-columns:repeat(2,minmax(0,1fr));}
.alpro-kpi-grid--compact .alpro-kpi{grid-column:span 1;}
.alpro-kpi-grid--compact .alpro-kpi .value{font-size:20px;}
@media (max-width: 680px){.alpro-kpi-grid--compact{grid-template-columns:1fr;}}
.alpro-kpi{background:#fff;border:1px solid rgba(0,0,0,.08);border-radius:14px;padding:14px 16px;position:relative;overflow:hidden;}
.alpro-kpi:hover{border-color:rgba(0,0,0,.14);}
.alpro-kpi .top{display:flex;align-items:flex-start;justify-content:space-between;gap:10px;}
.alpro-kpi .label{font-size:12px;color:#6c757d;margin-bottom:6px;}
.alpro-kpi .value{font-size:22px;font-weight:800;line-height:1.1;}
.alpro-kpi .sub{font-size:12px;color:#6c757d;margin-top:6px;}
.alpro-kpi .icon{width:34px;height:34px;border-radius:10px;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,.04);}
.alpro-kpi .icon svg{width:20px;height:20px;opacity:.9;}

.alpro-kpi--sales{grid-column:span 3;border-left:4px solid rgba(23,162,184,.55);} /* info */
.alpro-kpi--fees{grid-column:span 3;border-left:4px solid rgba(220,53,69,.55);}  /* danger */
.alpro-kpi--net{grid-column:span 3;border-left:4px solid rgba(40,167,69,.55);}   /* success */
.alpro-kpi--commission{grid-column:span 3;border-left:4px solid rgba(111,66,193,.45);} /* purple */
.alpro-kpi--delivery{grid-column:span 3;border-left:4px solid rgba(0,123,255,.45);} /* blue */
.alpro-kpi--promo{grid-column:span 3;border-left:4px solid rgba(255,193,7,.5);} /* warning */

@media (max-width: 1300px){
  .alpro-kpi--sales,.alpro-kpi--fees,.alpro-kpi--net,.alpro-kpi--commission,.alpro-kpi--delivery,.alpro-kpi--promo{grid-column:span 6;}
}
@media (max-width: 820px){
  .alpro-filters{grid-template-columns:1fr;}
  .alpro-filters .filters-right{justify-content:flex-start;}
  .alpro-kpi--sales,.alpro-kpi--fees,.alpro-kpi--net,.alpro-kpi--commission,.alpro-kpi--delivery,.alpro-kpi--promo{grid-column:span 12;}
}

/* Breakdown */
.alpro-break{background:#fff;border:1px solid rgba(0,0,0,.08);border-radius:14px;padding:14px 16px;}
.alpro-break .row{display:grid;grid-template-columns:130px 1fr 120px;gap:10px;align-items:center;padding:8px 0;border-bottom:1px solid rgba(0,0,0,.06);}
.alpro-break .row:last-child{border-bottom:none;}
.alpro-break .name{font-size:12px;color:#495057;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}
.alpro-break .amount{text-align:right;font-size:12px;color:#495057;white-space:nowrap;}
.alpro-bar{height:10px;border-radius:999px;background:rgba(0,0,0,.04);overflow:hidden;}
.alpro-bar > span{display:block;height:100%;width:0;min-width:0;border-radius:999px;background:rgba(0,0,0,.35);} 
.alpro-bar--danger > span{background:rgba(220,53,69,.55);} 
.alpro-bar--info > span{background:rgba(23,162,184,.55);} 
.alpro-bar--success > span{background:rgba(40,167,69,.55);} 
.alpro-bar--warning > span{background:rgba(255,193,7,.65);} 
.alpro-bar--purple > span{background:rgba(111,66,193,.55);} 

/* Table */
.alpro-id{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:12px;}
.alpro-idwrap{display:flex;align-items:center;gap:8px;}
.alpro-idwrap .alpro-id{white-space:nowrap;word-break:break-word;}
.alpro-copy{display:inline-flex;align-items:center;justify-content:center;width:26px;height:26px;border-radius:8px;border:1px solid rgba(0,0,0,.06);background:rgba(0,0,0,.03);color:#495057;}
.alpro-copy:hover{background:rgba(0,0,0,.06);text-decoration:none;}
.alpro-copy.is-copied{background:rgba(40,167,69,.15);border-color:rgba(40,167,69,.35);color:#1e7e34;}
.alpro-table thead th{white-space:nowrap;}
.alpro-table tbody td{vertical-align:middle;}
.alpro-badge{display:inline-flex;align-items:center;gap:6px;padding:5px 10px;border-radius:999px;border:1px solid rgba(0,0,0,.06);background:rgba(0,0,0,.03);font-size:12px;color:#495057;}

.alpro-table-footer{display:flex;align-items:center;justify-content:space-between;gap:10px;flex-wrap:wrap;padding:12px 16px;border-top:1px solid rgba(0,0,0,.06);}
.alpro-table-footer .muted{font-size:12px;color:#6c757d;}

/* Pagination */
.alpro-pagination .pagination{margin:0;}
.alpro-pagination .page-link{border-radius:10px;margin-left:4px;margin-right:4px;}

/* Details */
.alpro-details-grid{display:grid;grid-template-columns:repeat(12,1fr);gap:12px;}
.alpro-details-grid .box{grid-column:span 3;background:#fff;border:1px solid rgba(0,0,0,.08);border-radius:14px;padding:14px 16px;}
@media (max-width: 1200px){
  .alpro-details-grid .box{grid-column:span 6;}
}
@media (max-width: 820px){
  .alpro-details-grid .box{grid-column:span 12;}
}

/* Modal */
.alpro-modal{position:fixed;inset:0;z-index:9999;display:none;}
.alpro-modal.is-open{display:block;}
.alpro-modal__backdrop{position:absolute;inset:0;background:rgba(0,0,0,.45);}
.alpro-modal__dialog{position:relative;margin:42px auto;max-width:1100px;width:calc(100% - 36px);background:#fff;border-radius:16px;box-shadow:0 12px 40px rgba(0,0,0,.25);overflow:hidden;}
.alpro-modal__head{display:flex;align-items:flex-start;justify-content:space-between;gap:12px;padding:16px 18px;border-bottom:1px solid rgba(0,0,0,.08);}
.alpro-modal__title{display:flex;flex-direction:column;gap:4px;}
.alpro-modal__meta{font-size:12px;color:#6c757d;}
.alpro-modal__close{border:0;background:rgba(0,0,0,.04);border-radius:10px;width:34px;height:34px;line-height:34px;text-align:center;font-size:22px;cursor:pointer;}
.alpro-modal__close:hover{background:rgba(0,0,0,.07);}
.alpro-modal__body{padding:16px 18px;max-height:calc(100vh - 130px);overflow:auto;}

.alpro-modal__loading{display:flex;align-items:center;gap:10px;color:#6c757d;}
.alpro-spinner{width:18px;height:18px;border-radius:50%;border:2px solid rgba(0,0,0,.15);border-top-color:rgba(0,0,0,.45);animation:alproSpin .9s linear infinite;}
@keyframes alproSpin{to{transform:rotate(360deg);}}

/* Modal content */
.alpro-modal-kpis{display:grid;grid-template-columns:repeat(12,1fr);gap:12px;margin-bottom:12px;}
.alpro-modal-kpis .kpi{grid-column:span 3;background:#fff;border:1px solid rgba(0,0,0,.08);border-radius:14px;padding:12px 14px;}
.alpro-modal-kpis .kpi .label{font-size:12px;color:#6c757d;margin-bottom:6px;}
.alpro-modal-kpis .kpi .value{font-size:20px;font-weight:900;line-height:1.1;}
.alpro-modal-kpis .kpi .sub{font-size:12px;color:#6c757d;margin-top:6px;}
@media (max-width: 1100px){.alpro-modal-kpis .kpi{grid-column:span 6;}}
@media (max-width: 720px){.alpro-modal-kpis .kpi{grid-column:span 12;}}

.alpro-modal-grid{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-bottom:12px;}
@media (max-width: 920px){.alpro-modal-grid{grid-template-columns:1fr;}}

.alpro-panel{background:#fff;border:1px solid rgba(0,0,0,.08);border-radius:14px;padding:14px 16px;}
.alpro-panel .hd{display:flex;align-items:center;justify-content:space-between;gap:10px;margin-bottom:10px;}
.alpro-panel .hd .t{font-weight:800;}
.alpro-panel .hd .muted{font-size:12px;color:#6c757d;}

.alpro-breakdown-table{width:100%;border-collapse:separate;border-spacing:0 6px;}
.alpro-breakdown-table td{padding:8px 10px;font-size:13px;}
.alpro-breakdown-table tr{background:rgba(0,0,0,.02);}
.alpro-breakdown-table tr td:first-child{border-top-left-radius:10px;border-bottom-left-radius:10px;}
.alpro-breakdown-table tr td:last-child{border-top-right-radius:10px;border-bottom-right-radius:10px;}
.alpro-breakdown-table .right{text-align:right;white-space:nowrap;}

/* Pie */
.alpro-pie-wrap{display:flex;align-items:center;gap:14px;flex-wrap:wrap;}
.alpro-pie{width:140px;height:140px;border-radius:50%;background:conic-gradient(rgba(111,66,193,.65) 0 1deg, rgba(0,0,0,.06) 1deg 360deg);position:relative;}
.alpro-pie::after{content:"";position:absolute;inset:22px;border-radius:50%;background:#fff;border:1px solid rgba(0,0,0,.06);}
.alpro-legend{display:flex;flex-direction:column;gap:6px;min-width:240px;}
.alpro-legend .it{display:flex;align-items:center;gap:8px;font-size:13px;}
.alpro-legend .dot{width:10px;height:10px;border-radius:50%;background:#999;flex:0 0 auto;}
.alpro-legend .name{flex:1;min-width:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}
.alpro-legend .val{white-space:nowrap;color:#495057;}

.alpro-dot--commission{background:rgba(111,66,193,.65);} 
.alpro-dot--delivery{background:rgba(0,123,255,.55);} 
.alpro-dot--smart{background:rgba(255,193,7,.75);} 
.alpro-dot--promotion{background:rgba(220,53,69,.6);} 
.alpro-dot--other{background:rgba(108,117,125,.55);} 
.alpro-dot--refunds{background:rgba(40,167,69,.6);} 

/* Items table in modal */
.alpro-items-table thead th{white-space:nowrap;}
.alpro-items-table tbody td{vertical-align:middle;}
.alpro-pill{display:inline-flex;align-items:center;gap:6px;padding:4px 10px;border-radius:999px;font-size:12px;border:1px solid rgba(0,0,0,.08);background:rgba(0,0,0,.03);} 
.alpro-pill--commission{border-color:rgba(111,66,193,.25);background:rgba(111,66,193,.08);} 
.alpro-pill--delivery{border-color:rgba(0,123,255,.22);background:rgba(0,123,255,.07);} 
.alpro-pill--smart{border-color:rgba(255,193,7,.28);background:rgba(255,193,7,.10);} 
.alpro-pill--promotion{border-color:rgba(220,53,69,.22);background:rgba(220,53,69,.07);} 
.alpro-pill--refunds{border-color:rgba(40,167,69,.22);background:rgba(40,167,69,.07);} 
.alpro-pill--other{border-color:rgba(108,117,125,.18);background:rgba(108,117,125,.06);} 


/* Structure (pie) on page */
.alpro-structure{background:#fff;border:1px solid rgba(0,0,0,.08);border-radius:14px;padding:14px 16px;}
.alpro-structure__head{display:flex;align-items:flex-start;justify-content:space-between;gap:12px;flex-wrap:wrap;margin-bottom:12px;}
.alpro-structure__head .ttl{font-weight:800;}
.alpro-structure__head .sub{font-size:12px;color:#6c757d;margin-top:2px;}
.alpro-structure__hint{display:flex;gap:8px;flex-wrap:wrap;align-items:center;}
.alpro-structure__hint .chip{display:inline-flex;align-items:center;gap:6px;padding:5px 10px;border-radius:999px;border:1px solid rgba(0,0,0,.06);background:rgba(0,0,0,.03);font-size:12px;color:#495057;}
.alpro-structure__grid{display:grid;grid-template-columns:280px 1fr;gap:14px;align-items:center;}
@media (max-width: 860px){.alpro-structure__grid{grid-template-columns:1fr;}}
.alpro-structure__grid{grid-template-columns:260px 1fr;align-items:start;}
.alpro-structure__chart{position:relative;width:220px;height:220px;margin:0;}
.alpro-structure__chart .alpro-pie{width:220px;height:220px;}
.alpro-structure__chart .alpro-pie::after{inset:40px;}
.alpro-pie-center{position:absolute;inset:0;display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;pointer-events:none;}
.alpro-pie-center .k{font-size:12px;color:#6c757d;margin-bottom:6px;}
.alpro-pie-center .v{font-size:20px;font-weight:900;line-height:1.1;}
.alpro-pie-center .sub{font-size:12px;color:#6c757d;margin-top:6px;}
.alpro-structure__legend{min-width:260px;}
.alpro-structure__legend{min-width:0;}

/* Legend table (main structure) */
.alpro-legend-title{font-weight:800;margin-bottom:4px;}
.alpro-legend-sub{font-size:12px;color:#6c757d;margin-bottom:10px;}
.alpro-legend-table{width:100%;border-collapse:separate;border-spacing:0;min-width:520px;}
.alpro-legend-table th{font-size:11px;text-transform:uppercase;letter-spacing:.02em;color:#6c757d;padding:10px 10px;border-bottom:1px solid rgba(0,0,0,.08);white-space:nowrap;}
.alpro-legend-table td{padding:10px 10px;border-bottom:1px solid rgba(0,0,0,.06);font-size:13px;vertical-align:middle;}
.alpro-legend-table tbody tr:hover{background:rgba(0,0,0,.02);}
.alpro-legend-table td.name{font-weight:600;color:#343a40;}
.alpro-legend-table .r{text-align:right;white-space:nowrap;}
.alpro-legend-table tr.is-note td{color:#6c757d;background:rgba(0,0,0,.015);}

.alpro-dot{display:inline-block;width:10px;height:10px;border-radius:50%;background:#999;}


/* Main legend: colored swatches + readable rows */
.alpro-swatch{display:inline-block;width:12px;height:12px;border-radius:4px;box-shadow:0 0 0 1px rgba(0,0,0,.08) inset;flex:0 0 auto;}
.alpro-swatch--commission{background:rgba(111,66,193,.65);} 
.alpro-swatch--delivery{background:rgba(0,123,255,.55);} 
.alpro-swatch--smart{background:rgba(255,193,7,.75);} 
.alpro-swatch--promotion{background:rgba(220,53,69,.6);} 
.alpro-swatch--other{background:rgba(108,117,125,.55);} 
.alpro-swatch--refunds{background:rgba(40,167,69,.6);} 

.alpro-legend-list{display:flex;flex-direction:column;gap:10px;margin-top:10px;}
.alpro-legend-row{display:grid;grid-template-columns:14px 1fr;gap:10px;align-items:start;}
.alpro-legend-row .nm{font-weight:700;color:#343a40;line-height:1.1;}
.alpro-legend-row .meta{display:flex;flex-wrap:wrap;gap:10px;margin-top:4px;color:#495057;font-size:12px;}
.alpro-legend-row .meta .pill{display:inline-flex;gap:6px;align-items:center;padding:4px 8px;border-radius:999px;background:rgba(0,0,0,.03);border:1px solid rgba(0,0,0,.06);} 
.alpro-legend-row.is-note .nm{color:#495057;}

/* Account picker (custom multiselect) */
.alpro-account-pick{display:flex;gap:10px;align-items:stretch;}
.alpro-account-pick .alpro-ms{flex:1 1 auto;min-width:260px;}
.alpro-btn-pick{height:38px;white-space:nowrap;}

/* Accounts multiselect (no external libs) */
.alpro-account-group{min-width:340px;}
.alpro-ms{position:relative;min-width:340px;}
.alpro-ms__btn{width:100%;height:38px;display:flex;align-items:center;justify-content:space-between;gap:10px;background:#fff;border:1px solid #ced4da;border-radius:10px;padding:8px 10px;cursor:pointer;}
.alpro-ms__btn:hover{border-color:rgba(0,0,0,.25);} 
.alpro-ms__btnText{display:block;min-width:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;color:#212529;}
.alpro-ms__chev{color:#6c757d;font-size:14px;flex:0 0 auto;}
.alpro-ms__menu{position:absolute;top:calc(100% + 6px);left:0;right:0;background:#fff;border:1px solid rgba(0,0,0,.12);border-radius:14px;box-shadow:0 10px 26px rgba(0,0,0,.14);z-index:2000;display:none;}
.alpro-ms__menu.open{display:block;}
.alpro-ms__menuHead{display:flex;align-items:center;justify-content:space-between;gap:12px;padding:10px 12px;border-bottom:1px solid rgba(0,0,0,.06);} 
.alpro-ms__hint{font-size:12px;color:#6c757d;}
.alpro-ms__menuActions a{font-size:12px;color:#0b6aa2;text-decoration:none;margin-left:10px;}
.alpro-ms__menuActions a:hover{text-decoration:underline;}
.alpro-ms__list{max-height:240px;overflow:auto;padding:6px 10px;}
.alpro-ms__item{display:flex;align-items:flex-start;gap:8px;padding:6px 4px;margin:0;cursor:pointer;font-size:13px;line-height:1.25;}
.alpro-ms__item input{margin-top:2px;}
